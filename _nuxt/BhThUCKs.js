import{S as d}from"./Dg2mw1ix.js";import{d as I}from"./COmZCg2D.js";import{r as m,E as v,ac as T,L as p,J as C,aN as N,aj as E,G as O,aI as x}from"./l4anJh-s.js";function w(){let e=document.activeElement;if(e==null)return null;for(;e!=null&&e.shadowRoot!=null&&e.shadowRoot.activeElement!=null;)e=e.shadowRoot.activeElement;return e}function A(){const e=m(),t=v(()=>["#text","#comment"].includes(e.value?.$el.nodeName)?e.value?.$el.nextElementSibling:I(e));return{primitiveElement:e,currentElement:t}}const R="data-reka-collection-item";function U(e={}){const{key:t="",isProvider:o=!1}=e,r=`${t}CollectionProvider`;let n;if(o){const i=m(new Map);n={collectionRef:m(),itemMap:i},x(r,n)}else n=T(r);const g=(i=!1)=>{const l=n.collectionRef.value;if(!l)return[];const a=Array.from(l.querySelectorAll(`[${R}]`)),s=Array.from(n.itemMap.value.values()).sort((u,f)=>a.indexOf(u.ref)-a.indexOf(f.ref));return i?s:s.filter(u=>u.ref.dataset.disabled!=="")},h=p({name:"CollectionSlot",setup(i,{slots:l}){const{primitiveElement:a,currentElement:c}=A();return O(c,()=>{n.collectionRef.value=c.value}),()=>E(d,{ref:a},l)}}),M=p({name:"CollectionItem",inheritAttrs:!1,props:{value:{validator:()=>!0}},setup(i,{slots:l,attrs:a}){const{primitiveElement:c,currentElement:s}=A();return C(u=>{if(s.value){const f=N(s.value);n.itemMap.value.set(f,{ref:s.value,value:i.value}),u(()=>n.itemMap.value.delete(f))}}),()=>E(d,{...a,[R]:"",ref:c},l)}}),S=v(()=>Array.from(n.itemMap.value.values())),_=v(()=>n.itemMap.value.size);return{getItems:g,reactiveItems:S,itemMapSize:_,CollectionSlot:h,CollectionItem:M}}const D="rovingFocusGroup.onEntryFocus",$={bubbles:!1,cancelable:!0},P={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function b(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function j(e,t,o){const r=b(e.key,o);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return P[r]}function k(e,t=!1){const o=w();for(const r of e)if(r===o||(r.focus({preventScroll:t}),w()!==o))return}function z(e,t){return e.map((o,r)=>e[(t+r)%e.length])}export{D as E,P as M,U as a,j as b,$ as c,k as f,w as g,A as u,z as w};
